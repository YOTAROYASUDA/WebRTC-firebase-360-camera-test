<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>WebRTC 360° Viewer Test</title>
  <style>
    body { font-family: sans-serif; padding: 1em; }
    video { background-color: black; }
    #localVideo { width: 480px; height: 270px; }
    /* remoteVideoはThree.jsによって全画面表示されるため非表示 */
    #remoteVideo { display: none; }
    div { margin-bottom: 10px; }
    #hangup { margin-top: 15px; background-color: #dc3545; color: white; border: none; padding: 10px; cursor: pointer; }
    #hangup:disabled { background-color: #6c757d; }
  </style>
  <script type="module" crossorigin src="/WebRTC-firebase-360-camera-test/assets/index-B0_U8ZYa.js"></script>
</head>
<body>
  <h2>WebRTC 360° Viewer</h2>

  <div>
    <label><input type="radio" name="role" value="sender" checked>送信者</label>
    <label><input type="radio" name="role" value="receiver">受信者 (360°ビュー)</label>
  </div>

  <div id="senderControls">
    <label for="resolution">解像度:</label>
    <select id="resolution">
      <option value="hd">1280x720</option>
      <option value="fhd">1920x1080</option>
      <option value="fourK">3840x2160</option>
    </select>

    <label for="codecSelect">コーデック:</label>
    <select id="codecSelect">
      <option value="VP8">VP8</option>
      <option value="VP9">VP9</option>
      <option value="H264">H264</option>
      <option value="AV1">AV1</option>
    </select>
    
    <button id="startCall">通話開始</button>
    
    <div>
      <p>通話ID: <strong id="callIdDisplay"></strong> <button id="copyCallId">コピー</button></p>
      <div id="localResolutionDisplay"></div>
    </div>
    <video id="localVideo" autoplay playsinline muted></video>
  </div>

  <div id="receiverControls" style="display: none;">
    <input id="callIdInput" placeholder="通話IDを入力" />
    <button id="joinCall">通話に参加</button>
  </div>

  <button id="hangup" disabled>通話終了</button>

  <video id="remoteVideo" autoplay playsinline></video>
  
</body>
</html>